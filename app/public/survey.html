<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>FriendFinder</title>
    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>
    <!-- Font -->
    <link href="https://fonts.googleapis.com/css?family=Wendy+One|Bitter" rel="stylesheet">
    <style>
    h2 {
        font-family: 'Wendy One', sans-serif;
        text-align: center;
        margin-top: 60px;
    }
    
    h3 {
        font-family: 'Bitter', serif;
        font-size: 30px;
    }
    
    h4 {
        font-family: 'Bitter', serif;
        font-size: 20px;
    }
    
    .footer {
        height: 20px;
        line-height: 3em;
        text-align: center;
    }
    
    #submit {
        margin-left: 0;
        width: 100%;
    }
    
    .header-info {
        text-align: center;
    }
    </style>
</head>

<body>
    <div class="container">
        <h2>Survey Questions</h2>
        <hr>
        <div class="header-info">
            <h3><strong>About You</strong></h3>
            <h4>Name (Required)</h4>
            <div class="input-field col s12">
                <input type="text" name="" id="name" class="form-control" required>
                <label for="name">Name</label>
            </div>
            <h4>Link to Photo Image (Required)</h4>
            <div class="input-field col s12">
                <input type="text" name="" id="photo" class="form-control" required>
                <label for="photo">Link to Photo</label>
            </div>
        </div>
        <br>
        <h3><strong>Question 1</strong></h3>
        <h4>You prefer cats to dogs.</h4>
        <div class="row">
            <div class="input-field col s12" class="questions">
                <select id="q1">
                    <option value="">Please Select One</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
        </div>
        <h3><strong>Question 2</strong></h3>
        <h4>You would eat a cheeseburger over a salad.</h4>
        <div class="row">
            <div class="input-field col s12" class="questions">
                <select id="q2">
                    <option value="">Please Select One</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
        </div>
        <h3><strong>Question 3</strong></h3>
        <h4>You are outgoing.</h4>
        <div class="row">
            <div class="input-field col s12" class="questions">
                <select id="q3">
                    <option value="">Please Select One</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
        </div>
        <h3><strong>Question 4</strong></h3>
        <h4>You prefer to cook your meals rather than eat out.</h4>
        <div class="row">
            <div class="input-field col s12" class="questions">
                <select id="q4">
                    <option value="">Please Select One</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
        </div>
        <h3><strong>Question 5</strong></h3>
        <h4>You enjoy long walks on the beach.</h4>
        <div class="row">
            <div class="input-field col s12" class="questions">
                <select id="q5">
                    <option value="">Please Select One</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
        </div>
        <h3><strong>Question 6</strong></h3>
        <h4>If something upsets you, you tend to take it out on other people.</h4>
        <div class="row">
            <div class="input-field col s12" class="questions">
                <select id="q6">
                    <option value="">Please Select One</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
        </div>
        <h3><strong>Question 7</strong></h3>
        <h4>You enjoy reading for fun.</h4>
        <div class="row">
            <div class="input-field col s12" class="questions">
                <select id="q7">
                    <option value="">Please Select One</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
        </div>
        <h3><strong>Question 8</strong></h3>
        <h4>You prefer outdoor activities to indoor activities.</h4>
        <div class="row">
            <div class="input-field col s12" class="questions">
                <select id="q8">
                    <option value="">Please Select One</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
        </div>
        <h3><strong>Question 9</strong></h3>
        <h4>You value love and family over money.</h4>
        <div class="row">
            <div class="input-field col s12" class="questions">
                <select id="q9">
                    <option value="">Please Select One</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
        </div>
        <h3><strong>Question 10</strong></h3>
        <h4>You enjoy eating fast food.</h4>
        <div class="row">
            <div class="input-field col s12" class="questions">
                <select id="q10">
                    <option value="">Please Select One</option>
                    <option value="1">1 (Strongly Disagree)</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5 (Strongly Agree)</option>
                </select>
            </div>
        </div>
        <br>
        <br>
        <!-- Submit Button -->
        <button type="submit" class="waves-effect waves-light btn" id="submit">Submit</button>
        <hr>
        <footer class="footer">
            <div class="container">
                <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/Skylarann725/FriendFinder">GitHub Repo</a></p>
            </div>
        </footer>
    </div>
    <!-- Modal Structure -->
    <div id="resultsModal" class="modal">
        <div class="modal-content center-align">
            <h4 class="result-text">Your best match is: </h4>
            <h2 class="result-text" id="matchName"></h2>
            <img id="matchImg" src="" alt="" />
        </div>
        <div class="modal-footer">
            <a class="modal-action modal-close waves-effect waves-green btn-flat">Close</a>
        </div>
    </div>
    <script type="text/javascript">
    $('select').material_select();
    $('#resultsModal').modal();

    // Capture the form inputs 
    $("#submit").on("click", function() {

        // Form validation
        function validateForm() {
            var isValid = true;
            $('.form-control').each(function() {
                if ($(this).val() === '')
                    isValid = false;
            });

            $('.questions').each(function() {
                console.log(isValid);

                if ($(this).val() === "")
                    isValid = false
            })
            return isValid;
        }

        // If all required fields are filled
        if (validateForm() == true) {
            // Create an object for the user's data
            var userData = {
                name: $("#name").val(),
                photo: $("#photo").val(),
                scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val(), ]
            }
            console.log(userData)


            // Grab the URL of the website
            var currentURL = window.location.origin;

            // AJAX post the data to the friends API. 
            $.post(currentURL + "/api/friends", userData, function(data) {

                // Grab the result from the AJAX post so that the best match's name and photo are displayed.
                $("#matchName").text(data.name);
                $('#matchImg').attr("src", data.photo);

                // Show the modal with the best match 
                $("#resultsModal").modal('open');

            });
        } else {
            alert("Please fill out all fields before submitting!");
        }

        return false;
    });
    </script>
</body>

</html>
